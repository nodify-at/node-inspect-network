"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const socket_1 = require("./socket");
class InspectNetworkRequest {
    init(request) {
        const client = socket_1.socket;
        const proto = InspectNetworkRequest.requestPrototype(request);
        if (!proto._initBeforeDebug) {
            proto._initBeforeDebug = proto.init;
            proto.init = function () {
                if (!this.initialized) {
                    this.initialized = true;
                    const _debugId = Math.random().toString(36).substr(2, 20);
                    this.on('request', () => {
                        const data = {
                            start: true,
                            debugId: _debugId,
                            uri: this.uri.href,
                            method: this.method,
                            headers: this.headers,
                            body: undefined
                        };
                        client.send(data);
                    });
                    this.on('data', (chunk) => {
                        const data = {
                            receiving: true,
                            debugId: _debugId,
                            length: chunk.length
                        };
                        client.send(data);
                    });
                    this.on('response', (res) => {
                        if (this.callback) {
                        }
                        else {
                            const data = {
                                finished: true,
                                debugId: _debugId,
                                headers: res.headers,
                                statusCode: res.statusCode,
                                body: res.body
                            };
                            client.send(data);
                        }
                    });
                    this.on('complete', (res) => {
                        if (this.callback) {
                            const data = {
                                finished: true,
                                debugId: _debugId,
                                headers: res.headers,
                                statusCode: res.statusCode,
                                body: res.body
                            };
                            client.send(data);
                        }
                    });
                    this.on('redirect', () => {
                        const type = (this.response.statusCode == 401 ? 'auth' : 'redirect');
                        const data = {
                            type,
                            debugId: _debugId,
                            statusCode: this.response.statusCode,
                            headers: this.response.headers,
                            uri: this.uri.href
                        };
                        client.send(data);
                    });
                }
                return proto._initBeforeDebug.apply(this, arguments);
            };
        }
        this.stopDebugging(request, proto);
    }
    static requestPrototype(request) {
        let proto;
        if (request.Request) {
            proto = request.Request.prototype;
        }
        else if (request.get && request.post) {
            const req = request('http://localhost:4').on('error', function () {
            });
            proto = req.constructor.prototype;
        }
        else {
            throw new Error('Pass the object returned by require(\'request\') to this function.');
        }
        return proto;
    }
    stopDebugging(request, proto) {
        if (!request.stopDebugging) {
            request.stopDebugging = function () {
                proto.init = proto._initBeforeDebug;
                delete proto._initBeforeDebug;
            };
        }
    }
}
exports.InspectNetworkRequest = InspectNetworkRequest;
exports.inspectNetworkRequest = (request) => new InspectNetworkRequest().init(request);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJpbmRleC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUNBLHFDQUFnQztBQUVoQyxNQUFhLHFCQUFxQjtJQUU5QixJQUFJLENBQUMsT0FBZ0I7UUFDakIsTUFBTSxNQUFNLEdBQUcsZUFBTSxDQUFDO1FBQ3RCLE1BQU0sS0FBSyxHQUFHLHFCQUFxQixDQUFDLGdCQUFnQixDQUFDLE9BQU8sQ0FBQyxDQUFDO1FBRTlELElBQUksQ0FBRSxLQUFhLENBQUMsZ0JBQWdCLEVBQUU7WUFDakMsS0FBYSxDQUFDLGdCQUFnQixHQUFHLEtBQUssQ0FBQyxJQUFJLENBQUM7WUFDN0MsS0FBSyxDQUFDLElBQUksR0FBRztnQkFDVCxJQUFJLENBQUMsSUFBSSxDQUFDLFdBQVcsRUFBRTtvQkFDbkIsSUFBSSxDQUFDLFdBQVcsR0FBRyxJQUFJLENBQUM7b0JBQ3hCLE1BQU0sUUFBUSxHQUFHLElBQUksQ0FBQyxNQUFNLEVBQUUsQ0FBQyxRQUFRLENBQUMsRUFBRSxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQztvQkFDMUQsSUFBSSxDQUFDLEVBQUUsQ0FBQyxTQUFTLEVBQUUsR0FBRyxFQUFFO3dCQUNwQixNQUFNLElBQUksR0FBRzs0QkFDVCxLQUFLLEVBQUUsSUFBSTs0QkFDWCxPQUFPLEVBQUUsUUFBUTs0QkFDakIsR0FBRyxFQUFFLElBQUksQ0FBQyxHQUFHLENBQUMsSUFBSTs0QkFDbEIsTUFBTSxFQUFFLElBQUksQ0FBQyxNQUFNOzRCQUNuQixPQUFPLEVBQUUsSUFBSSxDQUFDLE9BQU87NEJBQ3JCLElBQUksRUFBRSxTQUFTO3lCQUNsQixDQUFDO3dCQUNGLE1BQU0sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7b0JBQ3RCLENBQUMsQ0FBQyxDQUFDO29CQUNILElBQUksQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLENBQUMsS0FBVSxFQUFFLEVBQUU7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SyxDQUFDO0lBQ2pCLENBQUM7SUFFTyxhQUFhLENBQUMsT0FBZ0IsRUFBRSxLQUFVO1FBQzlDLElBQUksQ0FBRSxPQUFlLENBQUMsYUFBYSxFQUFFO1lBQ2hDLE9BQWUsQ0FBQyxhQUFhLEdBQUc7Z0JBQzdCLEtBQUssQ0FBQyxJQUFJLEdBQUcsS0FBSyxDQUFDLGdCQUFnQixDQUFDO2dCQUNwQyxPQUFPLEtBQUssQ0FBQyxnQkFBZ0IsQ0FBQTtZQUNqQyxDQUFDLENBQUE7U0FDSjtJQUNMLENBQUM7Q0FDSjtBQXZHRCxzREF1R0M7QUFFWSxRQUFBLHFCQUFxQixHQUFHLENBQUMsT0FBWSxFQUFFLEVBQUUsQ0FBQyxJQUFJLHFCQUFxQixFQUFFLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtSZXF1ZXN0LCBSZXNwb25zZX0gZnJvbSAncmVxdWVzdCc7XG5pbXBvcnQge3NvY2tldH0gZnJvbSBcIi4vc29ja2V0XCI7XG5cbmV4cG9ydCBjbGFzcyBJbnNwZWN0TmV0d29ya1JlcXVlc3Qge1xuXG4gICAgaW5pdChyZXF1ZXN0OiBSZXF1ZXN0KSB7XG4gICAgICAgIGNvbnN0IGNsaWVudCA9IHNvY2tldDtcbiAgICAgICAgY29uc3QgcHJvdG8gPSBJbnNwZWN0TmV0d29ya1JlcXVlc3QucmVxdWVzdFByb3RvdHlwZShyZXF1ZXN0KTtcblxuICAgICAgICBpZiAoIShwcm90byBhcyBhbnkpLl9pbml0QmVmb3JlRGVidWcpIHtcbiAgICAgICAgICAgIChwcm90byBhcyBhbnkpLl9pbml0QmVmb3JlRGVidWcgPSBwcm90by5pbml0O1xuICAgICAgICAgICAgcHJvdG8uaW5pdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuaW5pdGlhbGl6ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbml0aWFsaXplZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IF9kZWJ1Z0lkID0gTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyKDIsIDIwKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vbigncmVxdWVzdCcsICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGRhdGEgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVidWdJZDogX2RlYnVnSWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXJpOiB0aGlzLnVyaS5ocmVmLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogdGhpcy5tZXRob2QsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogdGhpcy5oZWFkZXJzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvZHk6IHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsaWVudC5zZW5kKGRhdGEpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vbignZGF0YScsIChjaHVuazogYW55KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkYXRhID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlY2VpdmluZzogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWJ1Z0lkOiBfZGVidWdJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZW5ndGg6IGNodW5rLmxlbmd0aFxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsaWVudC5zZW5kKGRhdGEpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vbigncmVzcG9uc2UnLCAocmVzOiBSZXNwb25zZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuY2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjYWxsYmFjayBzcGVjaWZpZWQsIHJlcXVlc3Qgd2lsbCBidWZmZXIgdGhlIGJvZHkgZm9yXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdXMsIHNvIHdhaXQgdW50aWwgdGhlIGNvbXBsZXRlIGV2ZW50IHRvIGRvIGFueXRoaW5nXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGRhdGEgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbmlzaGVkOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWJ1Z0lkOiBfZGVidWdJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogcmVzLmhlYWRlcnMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1c0NvZGU6IHJlcy5zdGF0dXNDb2RlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib2R5OiByZXMuYm9keVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpZW50LnNlbmQoZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm9uKCdjb21wbGV0ZScsIChyZXM6IFJlc3BvbnNlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5jYWxsYmFjaykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGRhdGEgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbmlzaGVkOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWJ1Z0lkOiBfZGVidWdJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogcmVzLmhlYWRlcnMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1c0NvZGU6IHJlcy5zdGF0dXNDb2RlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib2R5OiByZXMuYm9keVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpZW50LnNlbmQoZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMub24oJ3JlZGlyZWN0JywgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdHlwZSA9ICh0aGlzLnJlc3BvbnNlLnN0YXR1c0NvZGUgPT0gNDAxID8gJ2F1dGgnIDogJ3JlZGlyZWN0Jyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkYXRhID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVidWdJZDogX2RlYnVnSWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzQ29kZTogdGhpcy5yZXNwb25zZS5zdGF0dXNDb2RlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMucmVzcG9uc2UuaGVhZGVycyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cmk6IHRoaXMudXJpLmhyZWZcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICBjbGllbnQuc2VuZChkYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBwcm90by5faW5pdEJlZm9yZURlYnVnLmFwcGx5KHRoaXMsIGFyZ3VtZW50cylcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLnN0b3BEZWJ1Z2dpbmcocmVxdWVzdCwgcHJvdG8pO1xuICAgIH1cblxuICAgIHN0YXRpYyByZXF1ZXN0UHJvdG90eXBlKHJlcXVlc3Q6IGFueSk6IGFueSB7XG4gICAgICAgIGxldCBwcm90bzogYW55O1xuICAgICAgICBpZiAocmVxdWVzdC5SZXF1ZXN0KSB7XG4gICAgICAgICAgICBwcm90byA9IHJlcXVlc3QuUmVxdWVzdC5wcm90b3R5cGVcbiAgICAgICAgfSBlbHNlIGlmIChyZXF1ZXN0LmdldCAmJiByZXF1ZXN0LnBvc3QpIHtcbiAgICAgICAgICAgIC8vIFRoZSBvYmplY3QgcmV0dXJuZWQgYnkgcmVxdWVzdC5kZWZhdWx0cygpIGRvZXNuJ3QgaW5jbHVkZSB0aGVcbiAgICAgICAgICAgIC8vIFJlcXVlc3QgcHJvcGVydHksIHNvIGRvIHRoaXMgaG9ycmlibGUgdGhpbmcgdG8gZ2V0IGF0IGl0LiAgUGVyXG4gICAgICAgICAgICAvLyBXaWtpcGVkaWEsIHBvcnQgNCBpcyB1bmFzc2lnbmVkLlxuICAgICAgICAgICAgY29uc3QgcmVxID0gcmVxdWVzdCgnaHR0cDovL2xvY2FsaG9zdDo0Jykub24oJ2Vycm9yJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBwcm90byA9IHJlcS5jb25zdHJ1Y3Rvci5wcm90b3R5cGVcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICAgICAgICAnUGFzcyB0aGUgb2JqZWN0IHJldHVybmVkIGJ5IHJlcXVpcmUoXFwncmVxdWVzdFxcJykgdG8gdGhpcyBmdW5jdGlvbi4nKVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBwcm90bztcbiAgICB9XG5cbiAgICBwcml2YXRlIHN0b3BEZWJ1Z2dpbmcocmVxdWVzdDogUmVxdWVzdCwgcHJvdG86IGFueSkge1xuICAgICAgICBpZiAoIShyZXF1ZXN0IGFzIGFueSkuc3RvcERlYnVnZ2luZykge1xuICAgICAgICAgICAgKHJlcXVlc3QgYXMgYW55KS5zdG9wRGVidWdnaW5nID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHByb3RvLmluaXQgPSBwcm90by5faW5pdEJlZm9yZURlYnVnO1xuICAgICAgICAgICAgICAgIGRlbGV0ZSBwcm90by5faW5pdEJlZm9yZURlYnVnXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmV4cG9ydCBjb25zdCBpbnNwZWN0TmV0d29ya1JlcXVlc3QgPSAocmVxdWVzdDogYW55KSA9PiBuZXcgSW5zcGVjdE5ldHdvcmtSZXF1ZXN0KCkuaW5pdChyZXF1ZXN0KTsiXX0=